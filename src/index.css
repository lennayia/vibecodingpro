@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Colors */
    --color-bg-light: #FFFDF9;
    --color-bg-dark: #070716;
    --color-bg-dark-alt: #05050f;
    --color-text-light: #2E2E2E;
    --color-text-dark: #f2f2f2;
    --color-text-muted-light: #374151;
    --color-text-muted-dark: #eaeaea;
    --color-accent-light: #B56C4E; /* Rusty copper for light mode */
    --color-accent-dark: #0DDD0D;
    --color-secondary-light: #D4C5B5; /* Sand/beige secondary */
    --color-error: #9A0303;
    --color-error-light: #DC2626;
    --color-error-dark: #9A0303;

    /* Typography scales - with system font fallbacks */
    --font-display: 'Cormorant Garamond', serif; /* Elegant serif for light mode */
    --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, system-ui, sans-serif;

    /* Spacing & Timing */
    --transition-base: 0.3s ease;
    --transition-slow: 0.6s ease-out;

    /* Color scheme meta */
    color-scheme: light dark;
  }

  /* Dark mode keeps Manrope (sans-serif) */
  .dark {
    --font-display: 'Manrope', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  }

  /* Performance optimizations */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  html, body, #root {
    min-height: 100vh;
    overflow-x: hidden;
  }

  html {
    scroll-behavior: smooth;
    /* @media (prefers-reduced-motion: reduce) {
      scroll-behavior: auto;
    } */
  }

  body {
    background-color: var(--color-bg-light);
    color: var(--color-text-light);
    font-family: var(--font-body);
    font-size: clamp(0.875rem, 1vw + 0.5625rem, 1.125rem); /* 14-18px, 501-900px */
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    overflow-x: hidden;
    width: 100%;
  }

  .dark body {
    background-color: var(--color-bg-dark);
    color: var(--color-text-dark);
  }

  /* Typography - Mobile First with Fluid Sizing */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 700;
    line-height: 1.2;
    color: var(--color-text-light);
  }

  .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
    color: var(--color-text-muted-dark);
    font-family: 'Manrope', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
  }

  /* Fluid typography with clamp() */
  h1 {
    font-size: clamp(2rem, 6.857vw + 0.857rem, 6rem); /* 32-96px, 501-1200px */
  }

  h2 {
    font-size: clamp(1.75rem, 2.857vw + 1.607rem, 3.75rem); /* 28-60px, 501-1200px */
    line-height: 1.3;
  }

  h3 {
    font-size: clamp(1.5rem, 2vw + 1.125rem, 2.25rem); /* 24-36px, 501-900px */
  }

  .subtitle {
    font-size: clamp(1rem, 1vw + 0.8125rem, 1.375rem); /* 16-22px, 501-900px */
    font-weight: 300;
    color: #6b7280;
  }

  .dark .subtitle {
    color: var(--color-text-muted-dark);
  }

  /* Larger body text - replaces text-xl */
  .text-xl {
    font-size: clamp(1rem, 0.5vw + 0.875rem, 1.25rem) !important; /* 16-20px */
    font-weight: 300;
  }

  p:not([class*="text-"]), span:not([class*="text-"]), li:not([class*="text-"]), div:not([class*="font-display"]):not([class*="text-"]) {
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.75;
    color: var(--color-text-muted-light);
  }

  .dark p:not([class*="text-"]), .dark span:not([class*="text-"]), .dark li:not([class*="text-"]), .dark div:not([class*="font-display"]):not([class*="text-"]) {
    color: var(--color-text-dark);
  }

  /* Accent colors using variables */
  .text-accent {
    color: var(--color-accent-light) !important;
  }

  .dark .text-accent {
    color: var(--color-accent-dark) !important;
  }

  .bg-accent {
    background-color: var(--color-accent-light) !important;
  }

  .dark .bg-accent {
    background-color: var(--color-accent-dark) !important;
  }

  .border-accent {
    border-color: var(--color-accent-light) !important;
  }

  .dark .border-accent {
    border-color: var(--color-accent-dark) !important;
  }

  .text-error {
    color: var(--color-error-light);
  }

  .dark .text-error {
    color: var(--color-error-dark);
  }

  /* Base button - optimize hover */
  button {
    font-family: var(--font-body);
    cursor: pointer;
    transition: transform var(--transition-base);
    -webkit-user-select: none;
    user-select: none;
  }

  button:hover:not(:disabled) {
    transform: scale(1.05);
  }

  button:focus-visible {
    outline: 2px solid var(--color-accent-light);
    outline-offset: 2px;
  }

  .dark button:focus-visible {
    outline-color: var(--color-accent-dark);
  }

  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Accessibility */
  a:focus-visible {
    outline: 2px solid var(--color-accent-light);
    outline-offset: 2px;
    border-radius: 2px;
  }

  .dark a:focus-visible {
    outline-color: var(--color-accent-dark);
  }
}

@layer utilities {
  /* Gradient text */
  .text-gradient {
    background: linear-gradient(to right, #2E2E2E, #B56C4E, #2E2E2E);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: inline;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    padding-bottom: 0.15em;
  }

  .dark .text-gradient {
    background: linear-gradient(to right, #eaeaea, #0DDD0D, #eaeaea);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Popular badge */
  .badge-popular {
    background-color: var(--color-accent-light);
    color: white;
  }

  .dark .badge-popular {
    background-color: var(--color-accent-dark);
    color: var(--color-bg-dark);
  }

  /* Button styles - Soft UI 2026 */
  .btn {
    padding: 0.75rem 1.5rem;
    margin: 0;
    border-radius: 12px;
    font-weight: 500;
    font-size: 1rem;
    letter-spacing: 0.01em;
    background-color: var(--color-bg-light);
    color: var(--color-accent-light);
    border: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
    touch-action: manipulation; /* Better mobile performance */
    display: inline-block;
    width: auto;
  }

  .dark .btn {
    background-color: var(--color-bg-dark);
    color: var(--color-accent-dark);
  }

  .btn-primary {
    background: linear-gradient(180deg, #B8785C 0%, #A0522D 100%);
    color: white;
    border: none;
    box-shadow:
      0 2px 4px rgba(160, 82, 45, 0.3),
      0 6px 12px rgba(160, 82, 45, 0.25),
      0 12px 24px rgba(160, 82, 45, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    position: relative;
    z-index: 10;
    cursor: pointer;
  }

  .dark .btn-primary {
    background: linear-gradient(180deg, #0FEE0F 0%, #0DDD0D 100%);
    color: var(--color-bg-dark);
    border: none;
    box-shadow:
      0 2px 4px rgba(13, 221, 13, 0.25),
      0 6px 12px rgba(13, 221, 13, 0.3),
      0 12px 24px rgba(13, 221, 13, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.35);
    z-index: 10;
    cursor: pointer;
  }

  .btn-primary:hover:not(:disabled) {
    background: linear-gradient(180deg, #C88564 0%, #A0522D 100%);
    box-shadow:
      0 4px 8px rgba(160, 82, 45, 0.35),
      0 8px 16px rgba(160, 82, 45, 0.3),
      0 16px 32px rgba(160, 82, 45, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
  }

  .dark .btn-primary:hover:not(:disabled) {
    background: linear-gradient(180deg, #1FFF1F 0%, #0DDD0D 100%);
    box-shadow:
      0 4px 8px rgba(13, 221, 13, 0.35),
      0 8px 16px rgba(13, 221, 13, 0.35),
      0 16px 32px rgba(13, 221, 13, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.45);
    transform: translateY(-2px);
  }

  .btn-primary:active:not(:disabled) {
    background: linear-gradient(180deg, #A0522D 0%, #8B4513 100%);
    box-shadow:
      0 1px 2px rgba(160, 82, 45, 0.3),
      inset 0 2px 4px rgba(0, 0, 0, 0.2);
    transform: translateY(1px);
  }

  .dark .btn-primary:active:not(:disabled) {
    background: linear-gradient(180deg, #0DDD0D 0%, #0ACC0A 100%);
    box-shadow:
      0 1px 2px rgba(13, 221, 13, 0.3),
      inset 0 2px 4px rgba(0, 0, 0, 0.25);
    transform: translateY(1px);
  }

  /* Ghost/Secondary button - subtle, elegant */
  .btn-secondary {
    background: transparent;
    color: #2E2E2E;
    border: 1.5px solid rgba(181, 108, 78, 0.3);
    box-shadow: none;
    font-weight: 400;
  }

  .dark .btn-secondary {
    color: #e1e1e1;
    border: 1.5px solid rgba(13, 221, 13, 0.3);
  }

  .btn-secondary:hover:not(:disabled) {
    background: rgba(181, 108, 78, 0.05);
    border: 1.5px solid rgba(181, 108, 78, 0.5);
    box-shadow:
      0 2px 4px rgba(181, 108, 78, 0.15),
      0 4px 8px rgba(181, 108, 78, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
  }

  .dark .btn-secondary:hover:not(:disabled) {
    background: rgba(13, 221, 13, 0.05);
    border: 1.5px solid rgba(13, 221, 13, 0.5);
    box-shadow:
      0 2px 4px rgba(13, 221, 13, 0.15),
      0 4px 8px rgba(13, 221, 13, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
  }

  .btn-secondary:active:not(:disabled) {
    background: rgba(181, 108, 78, 0.1);
    border: 1.5px solid rgba(181, 108, 78, 0.6);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
    transform: translateY(0px);
  }

  .dark .btn-secondary:active:not(:disabled) {
    background: rgba(13, 221, 13, 0.1);
    border: 1.5px solid rgba(13, 221, 13, 0.6);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15);
    transform: translateY(0px);
  }

  .btn-lg {
    /* Removed - all buttons now have consistent padding and font-size */
  }

  .btn-badge {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 700;
    border-radius: 9999px;
    background-color: transparent;
    border: 1px solid #d1d5db;
    color: var(--color-text-light);
  }

  .dark .btn-badge {
    border: none;
    color: var(--color-text-dark);
  }

  .btn-badge-accent {
    color: var(--color-accent-light);
  }

  .dark .btn-badge-accent {
    color: var(--color-accent-dark);
  }

  /* Scroll to top button - prevent transform from breaking fixed positioning */
  .scroll-to-top-btn {
    transform: none !important;
  }

  .scroll-to-top-btn:hover {
    transform: none !important;
    opacity: 0.8;
  }

  .bg-accent {
    background-color: var(--color-accent-light);
  }

  .dark .bg-accent {
    background-color: var(--color-accent-dark);
  }

  .bg-accent\/90 {
    background-color: rgba(0, 0, 205, 0.9);
  }

  .dark .bg-accent\/90 {
    background-color: rgba(13, 221, 13, 0.9);
  }

  /* Animations with performance in mind */
  .animate-fade-in {
    animation: fadeIn 0.8s ease-in-out;
    will-change: opacity, transform;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Opera */
  }

  /* Vertical responsiveness for small screens (10" notebooks, etc.) */
  @media (max-height: 900px) {
    /* Keep sections full height but allow content to determine actual height */
    .min-h-screen {
      min-height: 100vh !important;
    }

    /* Reduce section padding significantly to fit content */
    section {
      padding-top: clamp(0.5rem, 2vh, 1.5rem) !important;
      padding-bottom: clamp(0.5rem, 2vh, 1.5rem) !important;
    }

    /* Adjust heading sizes for small vertical space */
    h1 {
      font-size: clamp(1.5rem, 4vw + 0.5rem, 3rem) !important;
      margin-bottom: clamp(0.5rem, 2vh, 1rem) !important;
    }

    h2 {
      font-size: clamp(1.25rem, 2vw + 0.5rem, 2.25rem) !important;
    }

    h3 {
      font-size: clamp(1.125rem, 1.5vw + 0.5rem, 1.75rem) !important;
    }

    /* Reduce spacing in content */
    p:not(.font-display), .text-xl {
      font-size: clamp(0.875rem, 1vw + 0.4vh, 1rem) !important;
      line-height: 1.5 !important;
    }

    /* Margin only for elements without custom-spacing */
    p:not(.font-display):not(.custom-spacing), .text-xl:not(.custom-spacing) {
      margin-bottom: clamp(0.25rem, 1vh, 0.75rem) !important;
    }

    /* Reduce button spacing - but NOT carousel dot indicators or navigation arrows or accordion buttons */
    .btn, button:not(.w-3):not(.w-12):not(.w-5):not(.rounded-full):not(.accordion-btn) {
      padding: clamp(0.5rem, 1.5vh, 0.75rem) clamp(1rem, 3vw, 1.5rem) !important;
      font-size: clamp(0.875rem, 1vw, 1rem) !important;
    }

    /* Reduce gaps - but NOT for carousel indicators */
    .gap-4:not(:has(> button.rounded-full)) {
      gap: 0.5rem !important;
    }

    /* ImagineSection timeline optimizations */
    .text-base {
      font-size: clamp(0.875rem, 1vw, 1rem) !important;
    }

    .text-sm {
      font-size: clamp(0.75rem, 0.9vw, 0.875rem) !important;
    }

    .text-xs {
      font-size: clamp(0.65rem, 0.8vw, 0.75rem) !important;
    }
  }

  @media (max-height: 650px) {
    /* Even more aggressive reduction for very small screens */
    section {
      padding-top: clamp(0.5rem, 2vh, 1rem) !important;
      padding-bottom: clamp(0.5rem, 2vh, 1rem) !important;
    }

    /* Reduce gaps and margins */
    .gap-8 {
      gap: 1rem !important;
    }

    .mb-16, .mt-16 {
      margin-bottom: 2rem !important;
      margin-top: 2rem !important;
    }

    .py-28, .py-32 {
      padding-top: 1rem !important;
      padding-bottom: 1rem !important;
    }
  }

  /* Performance: Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* SimpleShop Form Styling - More specific selectors */

  /* All input fields - comprehensive targeting */
  [data-SimpleShopForm] input[type="text"],
  [data-SimpleShopForm] input[type="email"],
  [data-SimpleShopForm] input[type="tel"],
  [data-SimpleShopForm] input[type="number"],
  [data-SimpleShopForm] input[type="password"],
  [data-SimpleShopForm] select,
  [data-SimpleShopForm] textarea,
  div[data-SimpleShopForm] input[type="text"],
  div[data-SimpleShopForm] input[type="email"],
  div[data-SimpleShopForm] input[type="tel"],
  div[data-SimpleShopForm] input[type="number"],
  div[data-SimpleShopForm] select,
  div[data-SimpleShopForm] textarea,
  .sss-form input[type="text"],
  .sss-form input[type="email"],
  .sss-form input[type="tel"],
  .sss-form input[type="number"],
  .sss-form select,
  .sss-form textarea,
  form[class*="sss"] input[type="text"],
  form[class*="sss"] input[type="email"],
  form[class*="sss"] input[type="tel"],
  form[class*="sss"] input[type="number"],
  form[class*="sss"] select,
  form[class*="sss"] textarea {
    border-radius: 0.75rem !important; /* 12px - rounded-xl */
    border: 1px solid #d1d5db !important;
    padding: 0.75rem 1rem !important;
    transition: border-color 0.2s ease, box-shadow 0.2s ease !important;
  }

  /* Dark mode for inputs */
  .dark [data-SimpleShopForm] input[type="text"],
  .dark [data-SimpleShopForm] input[type="email"],
  .dark [data-SimpleShopForm] input[type="tel"],
  .dark [data-SimpleShopForm] input[type="number"],
  .dark [data-SimpleShopForm] select,
  .dark [data-SimpleShopForm] textarea,
  .dark div[data-SimpleShopForm] input,
  .dark div[data-SimpleShopForm] select,
  .dark div[data-SimpleShopForm] textarea,
  .dark .sss-form input,
  .dark .sss-form select,
  .dark .sss-form textarea {
    border-color: #374151 !important;
    background-color: #070716 !important;
    color: #f2f2f2 !important;
  }

  /* Focus states - comprehensive */
  [data-SimpleShopForm] input:focus,
  [data-SimpleShopForm] select:focus,
  [data-SimpleShopForm] textarea:focus,
  div[data-SimpleShopForm] input:focus,
  div[data-SimpleShopForm] select:focus,
  div[data-SimpleShopForm] textarea:focus,
  .sss-form input:focus,
  .sss-form select:focus,
  .sss-form textarea:focus {
    border-color: var(--color-accent-light) !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(0, 0, 205, 0.1) !important;
  }

  .dark [data-SimpleShopForm] input:focus,
  .dark [data-SimpleShopForm] select:focus,
  .dark [data-SimpleShopForm] textarea:focus,
  .dark div[data-SimpleShopForm] input:focus,
  .dark div[data-SimpleShopForm] select:focus,
  .dark div[data-SimpleShopForm] textarea:focus,
  .dark .sss-form input:focus,
  .dark .sss-form select:focus,
  .dark .sss-form textarea:focus {
    border-color: var(--color-accent-dark) !important;
    box-shadow: 0 0 0 3px rgba(13, 221, 13, 0.1) !important;
  }

  /* Buttons in SimpleShop form */
  [data-SimpleShopForm] button,
  [data-SimpleShopForm] input[type="submit"],
  [data-SimpleShopForm] input[type="button"],
  div[data-SimpleShopForm] button,
  div[data-SimpleShopForm] input[type="submit"],
  .sss-form button,
  .sss-form input[type="submit"] {
    border-radius: 0.75rem !important; /* 12px - rounded-xl for consistency */
    padding: 0.75rem 1.5rem !important;
    font-weight: 600 !important;
    transition: all 0.2s ease !important;
  }

  /* Radio buttons and checkboxes */
  [data-SimpleShopForm] input[type="radio"],
  [data-SimpleShopForm] input[type="checkbox"] {
    border-radius: 0.25rem !important;
  }

  /* Labels */
  [data-SimpleShopForm] label {
    font-weight: 500 !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }

  .dark [data-SimpleShopForm] label {
    color: #f2f2f2 !important;
  }

  /* Form groups/containers */
  [data-SimpleShopForm] > div {
    margin-bottom: 1rem !important;
  }

  /* SimpleShop specific - variant selection boxes */
  [data-SimpleShopForm] .sss-variant-item,
  [data-SimpleShopForm] .variant-item,
  div[data-SimpleShopForm] > div > div,
  .sss-variants > div {
    border-radius: 0.75rem !important;
  }

  [data-SimpleShopForm] .sss-variant-item,
  [data-SimpleShopForm] .variant-item {
    border: 2px solid #d1d5db !important;
    transition: all 0.2s ease !important;
  }

  .dark [data-SimpleShopForm] .sss-variant-item,
  .dark [data-SimpleShopForm] .variant-item {
    border-color: #374151 !important;
    background-color: #070716 !important;
  }

  [data-SimpleShopForm] .sss-variant-item:hover,
  [data-SimpleShopForm] .variant-item:hover {
    border-color: var(--color-accent-light) !important;
  }

  .dark [data-SimpleShopForm] .sss-variant-item:hover,
  .dark [data-SimpleShopForm] .variant-item:hover {
    border-color: var(--color-accent-dark) !important;
  }

  /* Selected variant */
  [data-SimpleShopForm] .sss-variant-item.selected,
  [data-SimpleShopForm] .variant-item.selected {
    border-color: var(--color-accent-light) !important;
    background-color: rgba(0, 0, 205, 0.05) !important;
  }

  .dark [data-SimpleShopForm] .sss-variant-item.selected,
  .dark [data-SimpleShopForm] .variant-item.selected {
    border-color: var(--color-accent-dark) !important;
    background-color: rgba(13, 221, 13, 0.05) !important;
  }

  /* SUPER AGGRESSIVE - Target ALL inputs in order pages */
  main input[type="text"],
  main input[type="email"],
  main input[type="tel"],
  main input[type="number"],
  main select,
  main textarea {
    border-radius: 0.75rem !important;
  }

  /* Specifically target the white form container */
  .bg-white.dark\:bg-\[\#05050f\] input,
  .bg-white.dark\:bg-\[\#05050f\] select,
  .bg-white.dark\:bg-\[\#05050f\] textarea {
    border-radius: 0.75rem !important;
    padding: 0.75rem 1rem !important;
  }

  /* Vignette gradient overlay for Hero text readability - Cloud Dancer (Pantone 2026) */
  .vignette-gradient {
    background: radial-gradient(ellipse 900px 700px at center, rgba(245, 244, 242, 0.95) 0%, rgba(245, 244, 242, 0.7) 40%, rgba(245, 244, 242, 0.3) 70%, transparent 100%);
    padding: clamp(2rem, 6vh, 4rem) clamp(1rem, 4vw, 2rem);
  }

  /* Asymmetric vignette on desktop - positioned left */
  @media (min-width: 768px) {
    .vignette-gradient {
      background: radial-gradient(ellipse 1000px 800px at 30% center, rgba(245, 244, 242, 0.95) 0%, rgba(245, 244, 242, 0.7) 35%, rgba(245, 244, 242, 0.3) 60%, transparent 100%);
    }
  }

  .dark .vignette-gradient {
    background: transparent;
    padding: clamp(2rem, 6vh, 4rem) clamp(1rem, 4vw, 2rem);
  }

  /* Elegant rusty copper divider line under H1 */
  .copper-divider-line {
    width: clamp(100px, 30%, 200px);
    height: 1px;
    background: linear-gradient(to right, transparent, #B56C4E, transparent);
    opacity: 0.3;
  }

  .dark .copper-divider-line {
    background: linear-gradient(to right, transparent, #0DDD0D, transparent);
  }
}
